"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8512],{96433:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>a,frontMatter:()=>r,metadata:()=>o,toc:()=>l});var s=t(85893),i=t(11151);const r={title:"IBC-Go v8 to v9",sidebar_label:"IBC-Go v8 to v9",sidebar_position:13,slug:"/migrations/v8-to-v9"},c="Migrating from v8 to v9",o={id:"migrations/v8-to-v9",title:"IBC-Go v8 to v9",description:"This guide provides instructions for migrating to a new version of ibc-go.",source:"@site/docs/05-migrations/13-v8-to-v9.md",sourceDirName:"05-migrations",slug:"/migrations/v8-to-v9",permalink:"/main/migrations/v8-to-v9",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:13,frontMatter:{title:"IBC-Go v8 to v9",sidebar_label:"IBC-Go v8 to v9",sidebar_position:13,slug:"/migrations/v8-to-v9"},sidebar:"defaultSidebar",previous:{title:"IBC-Go v8 to v8.1",permalink:"/main/migrations/v8-to-v8_1"}},d={},l=[{value:"Chains",id:"chains",level:2},{value:"IBC Apps",id:"ibc-apps",level:2},{value:"ICS20 - Transfer",id:"ics20---transfer",level:3},{value:"<code>DenomTrace</code> type",id:"denomtrace-type",level:4},{value:"ICS27 - Interchain Accounts",id:"ics27---interchain-accounts",level:3},{value:"IBC core",id:"ibc-core",level:3},{value:"API removals",id:"api-removals",level:3},{value:"02-client",id:"02-client",level:3},{value:"23-commitment",id:"23-commitment",level:3},{value:"IBC testing package",id:"ibc-testing-package",level:3},{value:"API deprecation notice",id:"api-deprecation-notice",level:4},{value:"Relayers",id:"relayers",level:2},{value:"IBC Light Clients",id:"ibc-light-clients",level:2},{value:"API removals",id:"api-removals-1",level:3},{value:"06-solomachine",id:"06-solomachine",level:3},{value:"07-tendermint",id:"07-tendermint",level:3},{value:"08-wasm",id:"08-wasm",level:3},{value:"09-localhost",id:"09-localhost",level:3}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"migrating-from-v8-to-v9",children:"Migrating from v8 to v9"}),"\n",(0,s.jsx)(n.p,{children:"This guide provides instructions for migrating to a new version of ibc-go."}),"\n",(0,s.jsx)(n.p,{children:"There are four sections based on the four potential user groups of this document:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#chains",children:"Chains"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ibc-apps",children:"IBC Apps"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#relayers",children:"Relayers"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"#ibc-light-clients",children:"IBC Light Clients"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note:"})," ibc-go supports golang semantic versioning and therefore all imports must be updated on major version releases."]}),"\n",(0,s.jsx)(n.h2,{id:"chains",children:"Chains"}),"\n",(0,s.jsxs)(n.p,{children:["Chains will need to remove the route for the legacy proposal handler for ",(0,s.jsx)(n.code,{children:"02-client"})," from their ",(0,s.jsx)(n.code,{children:"app/app.go"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"// app.go\ngovRouter.AddRoute(govtypes.RouterKey, govv1beta1.ProposalHandler).\n-       AddRoute(paramproposal.RouterKey, params.NewParamChangeProposalHandler(app.ParamsKeeper)).\n-       AddRoute(ibcclienttypes.RouterKey, ibcclient.NewClientProposalHandler(app.IBCKeeper.ClientKeeper))\n+       AddRoute(paramproposal.RouterKey, params.NewParamChangeProposalHandler(app.ParamsKeeper))\n"})}),"\n",(0,s.jsx)(n.h2,{id:"ibc-apps",children:"IBC Apps"}),"\n",(0,s.jsx)(n.h3,{id:"ics20---transfer",children:"ICS20 - Transfer"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["With support for multidenom transfer packets and path forwarding, the ",(0,s.jsx)(n.code,{children:"NewMsgTransfer"})," constructor function to create a new ",(0,s.jsx)(n.code,{children:"MsgTransfer"})," instance now accepts multiple coins instead of just one, and an argument with forwarding information:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"func NewMsgTransfer(\n  sourcePort, sourceChannel string,\n- token sdk.Coin, \n+ tokens sdk.Coins,\n  sender, receiver string,\n  timeoutHeight clienttypes.Height, timeoutTimestamp uint64,\n  memo string,\n+ forwarding *Forwarding,\n)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"ibc_transfer"})," and ",(0,s.jsx)(n.code,{children:"fungible_token_packet"})," events do not include the attributes ",(0,s.jsx)(n.code,{children:"denom"})," and ",(0,s.jsx)(n.code,{children:"amount"})," anymore; instead they include the attribute ",(0,s.jsx)(n.code,{children:"tokens"})," with the list of coins transferred in the packet."]}),"\n",(0,s.jsxs)(n.li,{children:["The helper function ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/types/coin.go#L46",children:(0,s.jsx)(n.code,{children:"GetTransferCoin"})})," has been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The helper function ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/types/coin.go#L35",children:(0,s.jsx)(n.code,{children:"GetDenomPrefix"})})," has been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The helper function ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/types/coin.go#L40",children:(0,s.jsx)(n.code,{children:"GetPrefixedDenom"})})," has been removed. Please construct the denom using the new ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/7068760f7277cab75b760a0d6ca95ccbfe2f78ae/modules/apps/transfer/types/token.pb.go#L82",children:[(0,s.jsx)(n.code,{children:"Denom"})," type"]}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.h4,{id:"denomtrace-type",children:[(0,s.jsx)(n.code,{children:"DenomTrace"})," type"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/types/transfer.pb.go#L25-L33",children:(0,s.jsx)(n.code,{children:"DenomTrace"})})," type has been made private and will be completely removed in a later release."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/keeper/grpc_query.go#L22-L75",children:[(0,s.jsx)(n.code,{children:"DenomTrace"})," and ",(0,s.jsx)(n.code,{children:"DenomTraces"})," gRPCs"]})," have therefore been removed as well. Please use the ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/14fedae884e541779eefd01fc4aab5fe194856bc/modules/apps/transfer/types/token.pb.go#L81-L87",children:[(0,s.jsx)(n.code,{children:"Denom"})," type"]})," instead, and the ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/14fedae884e541779eefd01fc4aab5fe194856bc/modules/apps/transfer/keeper/grpc_query.go#L27-L80",children:[(0,s.jsx)(n.code,{children:"Denom"})," and ",(0,s.jsx)(n.code,{children:"Denoms"})," gRPCs"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["An ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/14fedae884e541779eefd01fc4aab5fe194856bc/modules/apps/transfer/keeper/migrations.go#L75-L113",children:"automatic migration handler"})," is also configured to migrate the storage from using ",(0,s.jsx)(n.code,{children:"DenomTrace"})," to ",(0,s.jsx)(n.code,{children:"Denom"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/keeper/relay.go#L268-L274",children:[(0,s.jsx)(n.code,{children:"denomination_trace"})," event emitted in the ",(0,s.jsx)(n.code,{children:"OnRecvPacket"})," callback"]})," has been replaced with the ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/18121380dec5cff5ec803f1088fd409e069c2c9e/modules/apps/transfer/keeper/relay.go#L247",children:[(0,s.jsx)(n.code,{children:"denom"})," event"]}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The functions ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/transfer/types/coin.go#L12-L32",children:[(0,s.jsx)(n.code,{children:"SenderChainIsSource"})," and ",(0,s.jsx)(n.code,{children:"ReceiverChainIsSource"})]})," have been replaced with the function ",(0,s.jsx)(n.code,{children:"HasPrefix"})," of the newly added ",(0,s.jsx)(n.code,{children:"Denom"})," type."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ics27---interchain-accounts",children:"ICS27 - Interchain Accounts"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/5785",children:"#5785"})," the list of arguments of the ",(0,s.jsx)(n.code,{children:"NewKeeper"})," constructor function of the host submodule was extended with an extra argument for the gRPC query router that the submodule uses when executing a ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/eecfa5c09a4c38a5c9f2cc2a322d2286f45911da/proto/ibc/applications/interchain_accounts/host/v1/tx.proto#L41-L51",children:(0,s.jsx)(n.code,{children:"MsgModuleQuerySafe"})})," to perform queries that are module safe:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"func NewKeeper(\n  cdc codec.Codec, key storetypes.StoreKey, legacySubspace icatypes.ParamSubspace,\n  ics4Wrapper porttypes.ICS4Wrapper, channelKeeper icatypes.ChannelKeeper,\n  portKeeper icatypes.PortKeeper,\taccountKeeper icatypes.AccountKeeper, \n  scopedKeeper exported.ScopedKeeper, msgRouter icatypes.MessageRouter,\n+ queryRouter icatypes.QueryRouter, \n  authority string,\n) Keeper\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The legacy function ",(0,s.jsx)(n.code,{children:"RegisterInterchainAccount"})," now takes an extra parameter to specify the ordering of new ICA channels:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"func (k Keeper) RegisterInterchainAccount(\n  ctx sdk.Context,\n  connectionID, owner,\n  version string,\n+ ordering channeltypes.Order\n) error {\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"requests"})," repeated field of ",(0,s.jsx)(n.code,{children:"MsgModuleQuerySafe"})," has been marked non-nullable, and therefore the signature of the constructor function ",(0,s.jsx)(n.code,{children:"NewMsgModuleQuerySafe"})," has been updated:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"func NewMsgModuleQuerySafe(\n  signer string, \n- requests []*QueryRequest,\n+ requests []QueryRequest,\n) *MsgModuleQuerySafe {\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The signature of the ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/v8.0.0/modules/apps/27-interchain-accounts/controller/ibc_middleware.go#L35",children:[(0,s.jsx)(n.code,{children:"NewIBCMiddleware"})," constructor function"]})," in the controller submodule now only takes the controller keeper as an argument:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"func NewIBCMiddleware(\n- app porttypes.IBCModule, \n  k keeper.Keeper,\n) IBCMiddleware {\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The base application is then set by default to nil and thus authentication is assumed to be done by a Cosmos SDK module, such as the ",(0,s.jsx)(n.code,{children:"x/gov"}),", ",(0,s.jsx)(n.code,{children:"x/group"})," or ",(0,s.jsx)(n.code,{children:"x/auth"}),", that sends messages to the controller submodule's message server. An authentication module can be set using the newly added ",(0,s.jsxs)(n.a,{href:"https://github.com/cosmos/ibc-go/blob/82b5fb668b6f1c918023fb7be72a8606d2329d81/modules/apps/27-interchain-accounts/controller/ibc_middleware.go#L46",children:[(0,s.jsx)(n.code,{children:"NewIBCMiddlewareWithAuth"})," constructor function"]}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"ibc-core",children:"IBC core"}),"\n",(0,s.jsx)(n.h3,{id:"api-removals",children:"API removals"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"exported.ChannelI"})," and ",(0,s.jsx)(n.code,{children:"exported.CounterpartyChannelI"})," interfaces have been removed. Please use the concrete types."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"exported.ConnectionI"})," and ",(0,s.jsx)(n.code,{children:"exported.CounterpartyConnectionI"})," interfaces have been removed. Please use the concrete types."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"exported.Proof"})," interface has been removed. Please use the ",(0,s.jsx)(n.code,{children:"MerkleProof"})," concrete type."]}),"\n",(0,s.jsxs)(n.li,{children:["The functions ",(0,s.jsx)(n.code,{children:"GetState()"}),", ",(0,s.jsx)(n.code,{children:"GetOrdering()"}),", ",(0,s.jsx)(n.code,{children:"GetCounterparty()"}),", ",(0,s.jsx)(n.code,{children:"GetConnectionHops()"}),", ",(0,s.jsx)(n.code,{children:"GetVersion()"})," of the ",(0,s.jsx)(n.code,{children:"Channel"})," type have been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The functions ",(0,s.jsx)(n.code,{children:"GetPortID()"}),", ",(0,s.jsx)(n.code,{children:"GetChannelID()"})," of the ",(0,s.jsx)(n.code,{children:"CounterpartyChannel"})," type have been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The functions ",(0,s.jsx)(n.code,{children:"GetClientID()"}),", ",(0,s.jsx)(n.code,{children:"GetState()"}),", ",(0,s.jsx)(n.code,{children:"GetCounterparty()"}),", ",(0,s.jsx)(n.code,{children:"GetVersions()"}),", and ",(0,s.jsx)(n.code,{children:"GetDelayPeriod"})," of the ",(0,s.jsx)(n.code,{children:"Connection"})," type have been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The functions ",(0,s.jsx)(n.code,{children:"GetClientID()"}),", ",(0,s.jsx)(n.code,{children:"GetConnectionID()"}),", and ",(0,s.jsx)(n.code,{children:"GetPrefix()"})," of the ",(0,s.jsx)(n.code,{children:"CounterpartyConnection"})," type have been removed."]}),"\n",(0,s.jsxs)(n.li,{children:["The utility function ",(0,s.jsx)(n.code,{children:"QueryLatestConsensusState"})," of ",(0,s.jsx)(n.code,{children:"04-channel"})," CLI has been removed."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"UnmarshalPacketData"})," now takes in the context, portID, and channelID. This allows the packet data to be unmarshaled based on the channel version."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Router"})," reference has been removed from IBC core keeper: ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/6138",children:"#6138"}),". Please use ",(0,s.jsx)(n.code,{children:"PortKeeper.Router"})," instead."]}),"\n",(0,s.jsxs)(n.li,{children:["The function ",(0,s.jsx)(n.code,{children:"CreateLocalhostClient"})," has been removed. The localhost client is now stateless."]}),"\n",(0,s.jsxs)(n.li,{children:["The function ",(0,s.jsx)(n.code,{children:"NewClientProposalHandler"})," has been removed. ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/6777",children:"#6777"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The composite interface ",(0,s.jsx)(n.code,{children:"QueryServer"})," has been removed from package ",(0,s.jsx)(n.code,{children:"core/types"}),". Please use the granular ",(0,s.jsx)(n.code,{children:"QueryServer"})," interfaces for ibc submodules directly."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"TypeClientMisbehaviour"})," constant has been removed."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"02-client",children:"02-client"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"QueryVerifyMembershipRequest"})," protobuf message has been modified to include ",(0,s.jsx)(n.code,{children:"commitment.v2.MerklePath"}),". The deprecated ",(0,s.jsx)(n.code,{children:"commitment.v1.MerklePath"})," field has been ",(0,s.jsx)(n.code,{children:"reserved"}),". ",(0,s.jsx)(n.a,{href:"#23-commitment",children:"See 23-commitment"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"23-commitment",children:"23-commitment"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"MerklePath"})," type has been deprecated and a new ",(0,s.jsx)(n.code,{children:"commitment.v2.MerklePath"})," type has been introduced (ref: ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/6644",children:"#6644"}),"). The new ",(0,s.jsx)(n.code,{children:"commitment.v2.MerklePath"})," contains ",(0,s.jsx)(n.code,{children:"repeated bytes"})," in favour of ",(0,s.jsx)(n.code,{children:"repeated string"}),". This allows users to prove values stored under keys which contain non-utf8 encoded symbols. As a result, changes have been made to the 02-client ",(0,s.jsx)(n.code,{children:"Query"})," service and 08-wasm contract API messages for JSON blobs. See ",(0,s.jsx)(n.a,{href:"#02-client",children:"02-client"})," and ",(0,s.jsx)(n.a,{href:"#08-wasm",children:"08-wasm"}),", respectively."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"ibc-testing-package",children:"IBC testing package"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"mock.PV"})," type has been removed in favour of ",(0,s.jsx)(n.a,{href:"https://github.com/cometbft/cometbft/blob/v0.38.5/types/priv_validator.go#L50",children:(0,s.jsx)(n.code,{children:"cmttypes.MockPV"})})," (",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/5709",children:"#5709"}),")."]}),"\n",(0,s.jsxs)(n.li,{children:["Functions ",(0,s.jsx)(n.code,{children:"ConstructUpdateTMClientHeader"})," and ",(0,s.jsx)(n.code,{children:"ConstructUpdateTMClientHeaderWithTrustedHeight"})," of ",(0,s.jsx)(n.code,{children:"TestChain"})," type have been replaced with ",(0,s.jsx)(n.code,{children:"IBCClientHeader"}),". This function will construct a ",(0,s.jsx)(n.code,{children:"07-tendermint"})," header to update the light client on the counterparty chain. The trusted height must be passed in as a non-zero height."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"GetValsAtHeight"})," has been renamed to ",(0,s.jsx)(n.code,{children:"GetTrustedValidators"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"AssertEventsLegacy"})," function of ",(0,s.jsx)(n.code,{children:"ibctesting"})," package (alias for ",(0,s.jsx)(n.code,{children:'"github.com/cosmos/ibc-go/v9/testing"'}),")  has been removed and ",(0,s.jsx)(n.code,{children:"AssertEvents"})," function should be used instead (ref: ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/6070",children:"#6070"}),")."]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-diff",children:"// testing/events.go\n- func AssertEventsLegacy(\n-   suite *testifysuite.Suite,\n-   expected EventsMap,\n-   actual []abci.Event,\n- )\n\nfunc AssertEvents(\n  suite *testifysuite.Suite,\n  expected []abci.Event,\n  actual []abci.Event,\n)\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"QueryServer"})," interface has been removed from the ",(0,s.jsx)(n.code,{children:"TestChain"})," struct. Submodule query servers can be constructed directly by passing their associated keeper to the appropriate constructor function. For example:"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-golang",children:"clientQueryServer := clientkeeper.NewQueryServer(app.IBCKeeper.ClientKeeper)\n"})}),"\n",(0,s.jsx)(n.h4,{id:"api-deprecation-notice",children:"API deprecation notice"}),"\n",(0,s.jsxs)(n.p,{children:["The testing package functions ",(0,s.jsx)(n.code,{children:"coordinator.Setup"}),", ",(0,s.jsx)(n.code,{children:"coordinator.SetupClients"}),", ",(0,s.jsx)(n.code,{children:"coordinator.SetupConnections"}),", ",(0,s.jsx)(n.code,{children:"coordinator.CreateConnections"}),", and ",(0,s.jsx)(n.code,{children:"coordinator.CreateChannels"})," have been deprecated and will be removed in v10.\nPlease use the new functions ",(0,s.jsx)(n.code,{children:"path.Setup"}),", ",(0,s.jsx)(n.code,{children:"path.SetupClients"}),", ",(0,s.jsx)(n.code,{children:"path.SetupConnections"}),", ",(0,s.jsx)(n.code,{children:"path.CreateConnections"}),", ",(0,s.jsx)(n.code,{children:"path.CreateChannels"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"relayers",children:"Relayers"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Renaming of event attribute keys in ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/5603",children:"#5603"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Removal of duplicate non-hexlified event attributes in ",(0,s.jsx)(n.a,{href:"https://github.com/cosmos/ibc-go/pull/6023",children:"#6023"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ibc-light-clients",children:"IBC Light Clients"}),"\n",(0,s.jsx)(n.h3,{id:"api-removals-1",children:"API removals"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ExportMetadata"})," interface function has been removed from the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface. Core IBC will export all key/value's within the 02-client store."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ZeroCustomFields"})," interface function has been removed from the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface."]}),"\n",(0,s.jsxs)(n.p,{children:["The following functions have also been removed from the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface: ",(0,s.jsx)(n.code,{children:"Initialize"}),", ",(0,s.jsx)(n.code,{children:"Status"}),", ",(0,s.jsx)(n.code,{children:"GetLatestHeight"}),", ",(0,s.jsx)(n.code,{children:"GetTimestampAtHeight"}),", ",(0,s.jsx)(n.code,{children:"VerifyClientMessage"}),", ",(0,s.jsx)(n.code,{children:"VerifyMembership"}),", ",(0,s.jsx)(n.code,{children:"VerifyNonMembership"}),", ",(0,s.jsx)(n.code,{children:"CheckForMisbehaviour"}),", ",(0,s.jsx)(n.code,{children:"UpdateState"}),", ",(0,s.jsx)(n.code,{children:"UpdateStateOnMisbehaviour"}),",  ",(0,s.jsx)(n.code,{children:"CheckSubstituteAndUpdateState"})," and ",(0,s.jsx)(n.code,{children:"VerifyUpgradeAndUpdateState"}),". ibc-go v9 decouples routing at the ",(0,s.jsx)(n.code,{children:"02-client"})," layer from the light clients' encoding structure (i.e. every light client implementation of the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface is not used anymore to route the requests to the right light client at the ",(0,s.jsx)(n.code,{children:"02-client"})," layer, instead a ",(0,s.jsx)(n.em,{children:"light client module"})," is registered for every light client type and ",(0,s.jsx)(n.code,{children:"02-client"})," routes the requests to the right light client module based on the client ID). Light client developers must implement the newly introduced ",(0,s.jsx)(n.code,{children:"LightClientModule"})," interface and are encouraged to move the logic implemented in the functions of their light client's implementation of the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface to the equivalent function in the ",(0,s.jsx)(n.code,{children:"LightClientModule"})," interface. The table below shows the equivalence between the ",(0,s.jsx)(n.code,{children:"ClientState"})," interface functions that have been removed and the functions in the ",(0,s.jsx)(n.code,{children:"LightClientModule"})," interface:"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.th,{children:[(0,s.jsx)(n.code,{children:"ClientState"})," interface"]}),(0,s.jsxs)(n.th,{children:[(0,s.jsx)(n.code,{children:"LightClientModule"})," interface"]})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Initialize"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Initialize"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Status"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Status"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GetLatestHeight"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LatestHeight"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"GetTimestampAtHeight"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"TimestampAtHeight"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyClientMessage"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyClientMessage"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyMembership"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyMembership"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyNonMembership"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyNonMembership"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CheckForMisbehaviour"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CheckForMisbehaviour"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UpdateState"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UpdateState"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UpdateStateOnMisbehaviour"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"UpdateStateOnMisbehaviour"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"CheckSubstituteAndUpdateState"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"RecoverClient"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyUpgradeAndUpdateState"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"VerifyUpgradeAndUpdateState"})})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ExportMetadata"})}),(0,s.jsx)(n.td,{})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"ZeroCustomFields"})}),(0,s.jsx)(n.td,{})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:["Please check also the ",(0,s.jsx)(n.a,{href:"/main/ibc/light-clients/overview",children:"Light client developer guide"})," for more information. The light client module implementation for ",(0,s.jsx)(n.code,{children:"07-tendermint"})," may also be useful as reference."]}),"\n",(0,s.jsx)(n.h3,{id:"06-solomachine",children:"06-solomachine"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"Initialize"}),", ",(0,s.jsx)(n.code,{children:"Status"}),", ",(0,s.jsx)(n.code,{children:"GetTimestampAtHeight"})," and ",(0,s.jsx)(n.code,{children:"UpdateStateOnMisbehaviour"})," functions in ",(0,s.jsx)(n.code,{children:"ClientState"})," have been removed and all their logic has been moved to functions of the ",(0,s.jsx)(n.code,{children:"LightClientModule"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["The ",(0,s.jsx)(n.code,{children:"Type"})," method on ",(0,s.jsx)(n.code,{children:"Misbehaviour"})," has been removed."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"07-tendermint",children:"07-tendermint"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"IterateConsensusMetadata"})," function has been removed."]}),"\n",(0,s.jsx)(n.h3,{id:"08-wasm",children:"08-wasm"}),"\n",(0,s.jsxs)(n.p,{children:["Refer to the ",(0,s.jsx)(n.a,{href:"/main/ibc/light-clients/wasm/migrations",children:"08-wasm migrations"})," for more information."]}),"\n",(0,s.jsx)(n.h3,{id:"09-localhost",children:"09-localhost"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"09-localhost"})," light client has been made stateless and will no longer update the client on every block. The ",(0,s.jsx)(n.code,{children:"ClientState"})," is constructed on demand when required.\nThe ",(0,s.jsx)(n.code,{children:"ClientState"})," itself is therefore no longer provable directly with ",(0,s.jsx)(n.code,{children:"VerifyMembership"})," or ",(0,s.jsx)(n.code,{children:"VerifyNonMembership"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Previously stored client state data is pruned automatically on IBC module store migration from ",(0,s.jsx)(n.code,{children:"ConsensusVersion"})," 6 to 7."]})]})}function a(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},11151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>c});var s=t(67294);const i={},r=s.createContext(i);function c(e){const n=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);